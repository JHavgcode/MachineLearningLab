version: "3.0"

services:
  preprocessing:
    build: preprocessing/
    container_name: preprocessing
    environment:
      - GENERATE_NEW_DRAIN=no
      - W2V_WINDOW_SIZE=5
      - W2V_EMBED_SIZE=300
      - NUM_NEG_SAMPLING=4
      - EPOCHS=400
    # runtime: nvidia
    volumes:
      - ./database:/database:ro
      - ./results:/results

  genmat:
    build: genmat/
    container_name: genmat
    environment:
      - TIME_FRAME=5
      - DB_PATH=/code/database/
    volumes:
      - ./database:/code/database:ro
      - ./results:/code/results

  dash:
    build: dash/
    container_name: dash
    volumes:
      - ./results:/code/results:ro
    ports:
      - "8050:8050"
